\documentclass{manual}
\usepackage[T1]{fontenc}

\title{cx\_Logging}

\author{Anthony Tuininga}
\authoraddress{
        \strong{Computronix}\\
        Email: \email{anthony.tuininga@gmail.com}
}

\date{\today}                   % date of release
\release{HEAD}                  % software release
\setreleaseinfo{}		% empty for final release
\setshortversion{HEAD}          % major.minor only for software

\begin{document}

\maketitle

\ifhtml
\chapter*{Front Matter\label{front}}
\fi

Copyright \copyright{} 2004-2006 Computronix.
All rights reserved.

See the end of this document for complete license and permissions
information.

\begin{abstract}

\noindent
cx\_Logging is a Python extension module that behaves similarly to the logging
module found in the standard Python library but has a C interface.

\end{abstract}

\tableofcontents

\chapter{Module Interface\label{module}}

\section{Starting Logging \label{pyStartLogging}}

\begin{funcdesc}{StartLogging}{\var{fileName}, \var{level},
    \optional{\var{maxFiles}, \var{maxFileSize}, \var{prefix}}}
  Start logging to the specified file at the given level.
\end{funcdesc}

\begin{funcdesc}{StartLoggingForThread}{\var{fileName}, \var{level},
    \optional{\var{maxFiles}, \var{maxFileSize}, \var{prefix}}}
  Start logging to the specified file at the given level but only for the
  current Python thread.
\end{funcdesc}

\begin{funcdesc}{StartLoggingStderr}{\var{level}, \optional{\var{prefix}}}
  Start logging to stderr at the specified level.
\end{funcdesc}

\begin{funcdesc}{StartLoggingStdout}{\var{level}, \optional{\var{prefix}}}
  Start logging to stdout at the specified level.
\end{funcdesc}


\section{Stopping Logging \label{pyStopLogging}}

\begin{funcdesc}{StopLogging}{}
  Stop logging.
\end{funcdesc}

\begin{funcdesc}{StopLoggingForThread}{}
  Stop logging on the given Python thread.
\end{funcdesc}


\section{Logging Messages \label{pyLogMessages}}

\begin{funcdesc}{Critical}{\var{format}, \var{*args}}
  Log a message at the CRITICAL level. The format and arguments are the
  standard Python format.
\end{funcdesc}

\begin{funcdesc}{Debug}{\var{format}, \var{*args}}
  Log a message at the DEBUG level. The format and arguments are the standard
  Python format.
\end{funcdesc}

\begin{funcdesc}{Error}{\var{format}, \var{*args}}
  Log a message at the ERROR level. The format and arguments are the standard
  Python format.
\end{funcdesc}

\begin{funcdesc}{Info}{\var{format}, \var{*args}}
  Log a message at the INFO level. The format and arguments are the standard
  Python format.
\end{funcdesc}

\begin{funcdesc}{Log}{\var{level}, \var{format}, \var{*args}}
  Log a message at the specified level. The format and arguments are the
  standard Python format.
\end{funcdesc}

\begin{funcdesc}{Trace}{\var{format}, \var{*args}}
  Log a message regardless of the current level. The format and arguments are
  the standard Python format.
\end{funcdesc}

\begin{funcdesc}{Warning}{\var{format}, \var{*args}}
  Log a message at the WARNING level. The format and arguments are the standard
  Python format.
\end{funcdesc}


\section{Logging Exceptions \label{pyLogExceptions}}

\begin{funcdesc}{LogException}{\var{value},
    \optional{\var{configuredExcBaseClass}}}
  Log the exception just raised. The value is either a string (in which case
  the exception will be retrieved from the thread state) or the value is a
  configured exception (in which case it will be used directly).
\end{funcdesc}


\section{Logging State \label{pyLoggingState}}

\begin{funcdesc}{GetLoggingFile}{}
  Return the file object to which logging is currently taking place.
\end{funcdesc}

\begin{funcdesc}{GetLoggingFileName}{}
  Return the name of the file to which logging is currently taking place.
\end{funcdesc}

\begin{funcdesc}{GetLoggingLevel}{}
  Return the current logging level.
\end{funcdesc}

\begin{funcdesc}{GetLoggingState}{}
  Return the current logging state.
\end{funcdesc}

\begin{funcdesc}{SetLoggingLevel}{\var{level}}
  Set the current logging level.
\end{funcdesc}

\begin{funcdesc}{SetLoggingState}{\var{state}}
  Set the current logging state.
\end{funcdesc}

\section{Constants}

\begin{datadesc}{buildtime}
  The date and time when the module was built.
\end{datadesc}

\begin{datadesc}{CRITICAL}
  The level at which critical errors are logged.
\end{datadesc}

\begin{datadesc}{DEBUG}
  The level at which debugging messages are logged.
\end{datadesc}

\begin{datadesc}{ENV_NAME_FILE_NAME}
  The environment variable name used for defining the file to which messages
  are to be logged.
\end{datadesc}

\begin{datadesc}{ENV_NAME_LEVEL}
  The environment variable name used for defining the level at which messages
  are to be logged.
\end{datadesc}

\begin{datadesc}{ENV_NAME_MAX_FILES}
  The environment variable name used for defining the maximum number of files
  to use in the rotating logging scheme.
\end{datadesc}

\begin{datadesc}{ENV_NAME_MAX_FILE_SIZE}
  The environment variable name used for defining the maximum size of files
  before the files are rotated.
\end{datadesc}

\begin{datadesc}{ENV_NAME_PREFIX}
  The environment variable name used for defining the prefix to use for all
  messages.
\end{datadesc}

\begin{datadesc}{ERROR}
  The level at which errors are logged.
\end{datadesc}

\begin{datadesc}{INFO}
  The level at which information messages are logged.
\end{datadesc}

\begin{datadesc}{NONE}
  The level at which no messages are logged.
\end{datadesc}

\begin{datadesc}{version}
  The version of the module.
\end{datadesc}

\begin{datadesc}{WARNING}
  The level at which warning messages are logged.
\end{datadesc}

\chapter{C Interface\label{cinterface}}

All methods return -1 for an error or 0 for success unless otherwise stated.

\section{Starting Logging \label{cStartLogging}}

\begin{cfuncdesc}{int}{StartLogging}{const char *filename, unsigned long level,
        unsigned long maxfiles, unsigned long maxfilesize, const char *prefix}
  Start logging to the specified file at the given level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{StartLoggingFromEnvironment}{}
  Start logging by reading the environment variables "CX_LOGGING_FILE_NAME",
  "CX_LOGGING_LEVEL", "CX_LOGGING_MAX_FILES", "CX_LOGGING_MAX_FILE_SIZE",
  "CX_LOGGING_PREFIX" to determine the parameters to the StartLogging method.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{StartLoggingForPythonThread}{const char *filename,
        unsigned long level, unsigned long maxfiles, unsigned long maxfilesize,
        const char *prefix}
  Start logging to the specified file at the given level but only for the
  currently active Python thread.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{StartLoggingStderr}{unsigned long level,
        const char *prefix}
  Start logging to stderr at the given level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{StartLoggingStdout}{unsigned long level,
        const char *prefix}
  Start logging to stdout at the given level.
\end{cfuncdesc}


\section{Stopping Logging\label{cStopLogging}}

\begin{cfuncdesc}{void}{StopLogging}{}
  Stop logging.
\end{cfuncdesc}

\begin{cfuncdesc}{void}{StopLoggingForPythonThread}{}
  Stop logging in the current Python thread.
\end{cfuncdesc}


\section{Logging Messages\label{cLoggingMessages}}

\begin{cfuncdesc}{int}{LogCritical}{const char *message}
  Log message at CRITICAL level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogDebug}{const char *message}
  Log message at DEBUG level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogError}{const char *message}
  Log message at ERROR level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogInfo}{const char *message}
  Log message at INFORMATION level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogMessage}{unsigned long level, const char *message}
  Log a message at the specified level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogMessageV}{unsigned long level, const char *format,
        ...}
  Log a message at the specified level using the standard C printf format with
  arguments.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogMessageVaList}{unsigned long level,
        const char *format, va_list args}
  Log a message at the specified level using the standard C printf format with
  arguments already encoded in a va_list.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogMessageForPythonV}{unsigned long level,
        const char *format, ...}
  Log a message at the specified level in the logging file defined for the
  current Python thread using the standard C printf format with arguments.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogMessageForPythonVaList}{unsigned long level,
        const char *format, ...}
  Log a message at the specified level in the logging file defined for the
  current Python thread using the standard C printf format with arguments
  already encoded in a va_list.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogTrace}{const char *message}
  Log message regardless of what level is currently being logged. This is
  primarily of use for logging tracing messages.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogWarning}{const char *message}
  Log message at WARNING level.
\end{cfuncdesc}


\section{Logging Exceptions\label{cLoggingExceptions}}

\begin{cfuncdesc}{int}{LogConfiguredException}{PyObject *errorobj}
  Log the contents of the error object. This method expects attributes named
  "message", "templateId", "arguments", "traaceback", "details" and "logLevel".
  If the "logLevel" attribute is missing logging is done at the ERROR level.
  If any of the other attributes are missing or of the wrong type that fact is
  logged and processing continues. This function returns -1 at all times as a
  convenience to the caller.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogPythonException}{const char *message}
  Log the current Python exception with the given message as the first message
  that is written to the log. The exception is logged with traceback if the
  traceback module is available. This function returns -1 at all times as a
  convenience to the caller.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{LogPythonExceptionWithTraceback}{const char *message,
        PyObject *type, PyObject *value, PyObject *traceback}
  Log the specified Python exception with the given message as the first
  message that is written to the log. The exception is logged with traceback if
  the traceback module is available. This function returns -1 at all times as a
  convenience to the caller.
\end{cfuncdesc}


\section{Logging State\label{cLoggingState}}

\begin{cfuncdesc}{unsigned long}{GetLoggingLevel}{}
  Return the current logging level.
\end{cfuncdesc}

\begin{cfuncdesc}{udt_LoggingState*}{GetLoggingState}{}
  Return the logging state for the current Python thread.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{IsLoggingStarted}{}
  Return 1 if logging has been started and 0 otherwise.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{SetLoggingLevel}{unsigned long newlevel}
  Set the current logging level.
\end{cfuncdesc}

\begin{cfuncdesc}{int}{SetLoggingState}{udt_LoggingState *state}
  Set the logging state for the current Python thread.
\end{cfuncdesc}

\input{license}

\end{document}

